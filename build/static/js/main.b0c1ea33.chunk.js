(this["webpackJsonpsoveltava-harjoitustyo-bhehy001xamk"]=this["webpackJsonpsoveltava-harjoitustyo-bhehy001xamk"]||[]).push([[0],{608:function(t,a,e){"use strict";e.r(a);var n=e(0),i=e(19),u=e.n(i),c=e(92),l=e.n(c),r=e(27),o=e(122),s=e(38),j=e(648),d=e(650),b=e(610),p=e(657),m=e(51),h=e(21),k=e(645),v=e(651),O=e(652),x=e(653),f=e(659),g=e(661),y=e(10),F=Object(k.a)((function(){return{tausta:{backgroundColor:"#F5FFFA",minHeight:"120px",paddingTop:"20px",paddingLeft:"70px"},tekstikentta:{fontSize:"16pt",paddingLeft:"20px",color:"#003333"},tekstikentta2:{fontSize:"22pt",paddingLeft:"20px",paddingTop:"20px",color:"#003333"},button:{fontSize:"12pt",padding:"10px",margin:"20px",background:"linear-gradient(45deg, #e6fff2 30%, #E0FFFF 90%)",boxShadow:"0 3px 5px 2px #F5F5F5",color:"#003333"}}}));var H=function(t){var a=F(),e=Object(n.useState)(!1),i=Object(s.a)(e,2),u=i[0],c=i[1],l=function(){c(!1)};return Object(y.jsx)(j.a,{className:a.tausta,maxWidth:"md",children:t.matka.tiedotTallennettu?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(d.a,{className:a.tekstikentta,children:["Matkakohde: ",t.matka.kohde," ",Object(y.jsx)("br",{}),"L\xe4ht\xf6p\xe4iv\xe4: ",Object(f.a)(t.matka.lahtopaiva,"d.M.y HH:mm"),Object(y.jsx)("br",{}),"Paluup\xe4iv\xe4: ",Object(f.a)(t.matka.paluupaiva,"d.M.y HH:mm"),Object(y.jsx)("br",{}),"Matkan kesto: ",Object(g.a)(t.matka.paluupaiva,t.matka.lahtopaiva)," p\xe4iv\xe4\xe4",Object(y.jsx)("br",{}),"Kohdevaluutta: ",t.matka.valuutta,Object(y.jsx)("br",{}),"Budjetti: ",t.matka.budjetti," \u20ac",t.matka.valuutta?Object(y.jsxs)(y.Fragment,{children:["  / ",(t.matka.budjetti*t.matka.valuutanarvo).toFixed(2)," ",t.matka.valuutta," ",Object(y.jsx)("br",{})]}):Object(y.jsx)("br",{})]}),Object(y.jsxs)(d.a,{className:a.tekstikentta2,children:["L\xe4ht\xf6\xf6n on viel\xe4 ",Object(g.a)(t.matka.lahtopaiva,new Date)," p\xe4iv\xe4\xe4. Hyv\xe4\xe4 matkaa!"]}),Object(y.jsx)(v.a,{component:m.b,to:"/uusimatka",variant:"contained",size:"large",className:a.button,children:"Muokkaa matkan tietoja"}),Object(y.jsx)(v.a,{variant:"contained",size:"large",className:a.button,onClick:function(){c(!0)},children:"Poista matka"}),Object(y.jsxs)(O.a,{open:u,onClose:l,children:[Object(y.jsx)(x.a,{children:"Haluatko varmasti poistaa matkan?"}),Object(y.jsx)(v.a,{onClick:function(){t.setMatka({kohde:"",valuutta:"",lahtopaiva:0,paluupaiva:0,budjetti:"",valuutanarvo:0,tiedotTallennettu:!1})},color:"primary",children:"Kyll\xe4"}),Object(y.jsx)(v.a,{onClick:l,color:"primary",autoFocus:!0,children:"Ei"})]})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(d.a,{className:a.tekstikentta,children:"Aloita lis\xe4\xe4m\xe4ll\xe4 matkan tiedot"}),Object(y.jsx)(v.a,{component:m.b,to:"/uusimatka",variant:"contained",size:"large",className:a.button,children:"Lis\xe4\xe4 uusi matka"})]})})},S=e(663),N=e(656),T=e(665),M=e(660),B=e(667),L=e(22),C=e(658),W=e(126),z=e(145),E=Object(k.a)((function(){return{tausta:{backgroundColor:"#F5FFFA",minHeight:"120px",paddingTop:"20px",paddingLeft:"70px"},tekstikentta:{fontSize:"16pt",paddingLeft:"20px"},button:{padding:"10px",margin:"20px",backgroundColor:"#e6fff2"}}}));var P=function(t){var a=E(),e=Object(n.useState)(null),i=Object(s.a)(e,2),u=i[0],c=i[1],l=Object(n.useState)(null),o=Object(s.a)(l,2),b=o[0],p=o[1],k=Object(n.useState)(""),O=Object(s.a)(k,2),x=O[0],f=O[1],g=Object(n.useRef)({}),F=Object(n.useState)({}),H=Object(s.a)(F,2),P=H[0],A=H[1],w=Object(h.e)();Object(n.useEffect)((function(){g.current.kohde=t.matka.kohde,g.current.budjetti=t.matka.budjetti,t.matka.lahtopaiva&&c(t.matka.lahtopaiva),t.matka.paluupaiva&&p(t.matka.paluupaiva),t.matka.valuutta&&f(t.matka.valuutta)}),[]);var V=function(t){var a=t.target.value;g.current[t.target.name]=a};return Object(y.jsx)(j.a,{className:a.tausta,maxWidth:"md",children:Object(y.jsx)(L.a,{utils:W.a,locale:z.fi,children:Object(y.jsxs)("form",{onSubmit:function(a){a.preventDefault();var e={};if(g.current.kohde||(e=Object(r.a)(Object(r.a)({},e),{},{kohde:"Matkakohde puuttuu"})),g.current.budjetti&&!isNaN(g.current.budjetti)||(e=Object(r.a)(Object(r.a)({},e),{},{budjetti:"Budjetti puuttuu tai on virheellinen"})),u||(e=Object(r.a)(Object(r.a)({},e),{},{pvmaika:"Anna l\xe4ht\xf6p\xe4iv\xe4m\xe4\xe4r\xe4"})),b||(e=Object(r.a)(Object(r.a)({},e),{},{paluupvmaika:"Anna paluup\xe4iv\xe4m\xe4\xe4r\xe4"})),Object.entries(e).length>0)A(Object(r.a)({},e));else{A({});var n={kohde:g.current.kohde,valuutta:x,valuutanarvo:t.valuutat[x],lahtopaiva:u,paluupaiva:b,budjetti:g.current.budjetti,tiedotTallennettu:!0,jaljella:0,kulut:0};t.setMatka(n),w.push("/")}},children:[Object(y.jsx)(d.a,{children:"Lis\xe4\xe4 uusi matka"}),Object(y.jsx)(S.a,{name:"kohde",label:"Matkakohde",variant:"outlined",fullWidth:!0,defaultValue:t.matka.kohde,style:{marginBottom:10},error:Boolean(P.kohde),helperText:P.kohde,onChange:V}),Object(y.jsx)(C.a,{clearable:!0,label:"L\xe4ht\xf6p\xe4iv\xe4",inputVariant:"outlined",fullWidth:!0,cancelLabel:"Peruuta",ampm:!1,value:u,format:"d.M.y HH:mm",onChange:c,error:Boolean(P.pvmaika),helperText:P.pvmaika,style:{marginBottom:10}}),Object(y.jsx)(C.a,{clearable:!0,label:"Paluup\xe4iv\xe4 (l\xe4ht\xf6p\xe4iv\xe4 on annettava ensin)",inputVariant:"outlined",fullWidth:!0,cancelLabel:"Peruuta",ampm:!1,value:b,disabled:!u,minDate:u,format:"d.M.y HH:mm",onChange:p,error:Boolean(P.paluupvmaika),helperText:P.paluupvmaika,style:{marginBottom:10}}),Object(y.jsx)(S.a,{name:"budjetti",label:"Budjetti (sy\xf6t\xe4 budjetti ainoastaan numeroina)",variant:"outlined",fullWidth:!0,style:{marginBottom:10},defaultValue:t.matka.budjetti,error:Boolean(P.budjetti),helperText:P.budjetti,onChange:V}),Object(y.jsxs)(N.a,{variant:"outlined",className:a.syote,fullWidth:!0,children:[Object(y.jsx)(T.a,{style:{paddingLeft:5,paddingRight:5},children:"Kohdevaluutta (ei pakollinen)"}),Object(y.jsx)(M.a,{value:x,defaultValue:t.matka.valuutta,displayEmpty:!0,onChange:function(t){f(t.target.value)},children:Object.keys(t.valuutat).sort().map((function(a){return Object(y.jsxs)(B.a,{value:a,children:[a," (",t.valuutat[a],")"]},a)}))})]}),Object(y.jsx)(v.a,{type:"submit",variant:"contained",fullWidth:!0,style:{marginBottom:10},className:a.button,children:"Tallenna matka"}),Object(y.jsx)(v.a,{component:m.b,to:"/",variant:"contained",fullWidth:!0,className:a.button,children:"Peruuta"})]})})})},A=e.p+"static/media/beach.78c7e244.jpg",w=Object(k.a)((function(){return{tausta:{minHeight:"200px",paddingTop:"20px",backgroundImage:"url(".concat(A,")")},tekstikentta:{paddingTop:"20px",fontSize:"36pt",textAlign:"center",color:"#003333"}}}));var V=function(t){var a=w();return Object(y.jsx)(j.a,{className:a.tausta,maxWidth:"md",children:Object(y.jsx)(d.a,{className:a.tekstikentta,children:t.children})})},I=Object(k.a)((function(){return{tausta:{background:"linear-gradient(45deg, #e6fff2 30%, #E0FFFF 90%)",minHeight:"80px",paddingTop:"20px"},tekstikentta:{fontSize:"12pt",textAlign:"center",color:"#003333"}}}));var J=function(){var t=I();return Object(y.jsx)(j.a,{className:t.tausta,maxWidth:"md",children:Object(y.jsxs)(d.a,{className:t.tekstikentta,children:["\xa9 2021 H. Hyv\xe4rinen ",Object(y.jsx)("br",{}),"Photos from Pixabay.com"]})})};var D=function(){var t=Object(n.useState)({kohde:"",valuutta:"",lahtopaiva:0,paluupaiva:0,budjetti:"",valuutanarvo:0,tiedotTallennettu:!1}),a=Object(s.a)(t,2),e=a[0],i=a[1],u=Object(n.useState)({valuuttakurssit:[],virhe:null,tiedotHaettu:!1}),c=Object(s.a)(u,2),k=c[0],v=c[1],O=function(){var t=Object(o.a)(l.a.mark((function t(){var a,e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.ratesapi.io/api/latest");case 3:return a=t.sent,t.next=6,a.json();case 6:e=t.sent,v(Object(r.a)(Object(r.a)({},k),{},{valuuttakurssit:e.rates,tiedotHaettu:!0})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),v(Object(r.a)(Object(r.a)({},k),{},{valuuttakurssit:[],tiedotHaettu:!0,virhe:"Virhe: yhteytt\xe4 valuuttapalvelimelle ei voitu muodostaa. (".concat(t.t0,")")}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){O(),localStorage.getItem("matka")?i(JSON.parse(localStorage.getItem("matka"))):(i(),console.log(e))}),[]),Object(n.useEffect)((function(){localStorage.setItem("matka",JSON.stringify(e))}),[e]),Object(y.jsx)(m.a,{children:Object(y.jsxs)(j.a,{children:[Object(y.jsx)(V,{children:"Matkasuunnitelma"}),Object(y.jsx)(h.a,{path:"/",exact:!0,children:Object(y.jsx)(H,{matka:e,setMatka:i,valuutat:k.valuuttakurssit})}),Object(y.jsx)(h.a,{path:"/uusimatka",children:Object(y.jsx)(P,{matka:e,setMatka:i,valuutat:k.valuuttakurssit})}),k.virhe?Object(y.jsx)(d.a,{color:"error",children:k.virhe}):k.tiedotHaettu?Object(y.jsx)(d.a,{}):Object(y.jsx)(b.a,{open:!0,children:Object(y.jsx)(p.a,{color:"inherit"})}),Object(y.jsx)(J,{})]})})};u.a.render(Object(y.jsx)(D,{}),document.getElementById("root"))}},[[608,1,2]]]);
//# sourceMappingURL=main.b0c1ea33.chunk.js.map